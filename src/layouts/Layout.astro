---
interface Props {
  title: string;
  description?: string;
}

const {
  title,
  description = "Una familia de fe en el corazón de General Pacheco",
} = Astro.props;
---

<!doctype html>
<html lang="es" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <meta name="description" content={description} />
    <title>{title}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Merriweather:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
  </head>
  <body class="min-h-screen bg-white-light">
    <header
      id="site-header"
      class="fixed w-full top-0 z-50 transition-all duration-300 bg-transparent text-white"
    >
      <div class="container mx-auto px-4 py-4">
        <nav class="flex justify-between items-center">
          <a
            href="#"
            class="font-serif text-white font-bold text-xl relative after:absolute after:bottom-0 after:left-0 after:w-full after:h-0.5 after:bg-accent after:scale-x-0 hover:after:scale-x-100 after:transition-transform after:duration-300 transition-colors duration-300"
          >
            ICE Pacheco
          </a>
          <div class="hidden md:flex gap-6 items-center">
            <a
              href="#nosotros"
              class="text-white hover:text-accent transition-all duration-300 relative after:absolute after:bottom-0 after:left-0 after:w-full after:h-0.5 after:bg-accent after:scale-x-0 hover:after:scale-x-100 after:transition-transform after:duration-300"
              >Nosotros</a
            >
            <a
              href="#horarios"
              class="text-white hover:text-accent transition-all duration-300 relative after:absolute after:bottom-0 after:left-0 after:w-full after:h-0.5 after:bg-accent after:scale-x-0 hover:after:scale-x-100 after:transition-transform after:duration-300"
              >Horarios</a
            >
            <a
              href="#ministerios"
              class="text-white hover:text-accent transition-all duration-300 relative after:absolute after:bottom-0 after:left-0 after:w-full after:h-0.5 after:bg-accent after:scale-x-0 hover:after:scale-x-100 after:transition-transform after:duration-300"
              >Ministerios</a
            >

            <a
              href="#contacto"
              class="px-4 py-2 bg-accent text-white rounded-lg shadow-lg hover:shadow-accent/20 transition-all duration-300 hover:-translate-y-0.5"
              >Contacto</a
            >
          </div>
          <button
            id="mobile-menu-button"
            class="md:hidden text-white p-2 hover:bg-white/10 rounded-lg transition-colors"
            aria-label="Menú"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-6 h-6"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path>
            </svg>
          </button>
        </nav>
      </div>
      <!-- Mobile menu no requiere cambios, ya que siempre será sobre un fondo blanco -->
      <div
        id="mobile-menu"
        class="hidden md:hidden bg-white/95 backdrop-blur-lg border-t border-gray-200/20"
      >
        <div class="container mx-auto px-4 py-2 flex flex-col">
          <a
            href="#nosotros"
            class="py-3 px-4 text-primary hover:bg-primary/5 rounded-lg transition-colors"
            >Nosotros</a
          >
          <a
            href="#horarios"
            class="py-3 px-4 text-primary hover:bg-primary/5 rounded-lg transition-colors"
            >Horarios</a
          >
          <a
            href="#ministerios"
            class="py-3 px-4 text-primary hover:bg-primary/5 rounded-lg transition-colors"
            >Ministerios</a
          >
          <a
            href="#preguntas"
            class="py-3 px-4 text-primary hover:bg-primary/5 rounded-lg transition-colors"
            >Preguntas</a
          >
          <a
            href="#contacto"
            class="py-3 px-4 text-primary hover:bg-primary/5 rounded-lg transition-colors"
            >Contacto</a
          >
        </div>
      </div>
    </header>

    <main>
      <slot />
    </main>

    <footer class="bg-dark text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
          <div data-aos="fade-up" data-aos-delay="100">
            <h3 class="font-serif text-2xl mb-6">
              Iglesia Cristiana Evangélica
            </h3>
            <p class="text-white/80 leading-relaxed">
              Una familia de fe en el corazón de General Pacheco.
            </p>
          </div>
          <div data-aos="fade-up" data-aos-delay="200">
            <h4 class="font-semibold text-xl mb-6">Enlaces Rápidos</h4>
            <ul class="space-y-3">
              <li>
                <a
                  href="#nosotros"
                  class="text-white/80 hover:text-white transition-colors hover:translate-x-1 inline-block"
                  >Nosotros</a
                >
              </li>
              <li>
                <a
                  href="#horarios"
                  class="text-white/80 hover:text-white transition-colors hover:translate-x-1 inline-block"
                  >Horarios</a
                >
              </li>
              <li>
                <a
                  href="#ministerios"
                  class="text-white/80 hover:text-white transition-colors hover:translate-x-1 inline-block"
                  >Ministerios</a
                >
              </li>
              <li>
                <a
                  href="#preguntas"
                  class="text-white/80 hover:text-white transition-colors hover:translate-x-1 inline-block"
                  >Preguntas Frecuentes</a
                >
              </li>
            </ul>
          </div>
          <div data-aos="fade-up" data-aos-delay="300">
            <h4 class="font-semibold text-xl mb-6">Contacto</h4>
            <address class="not-italic text-white/80 space-y-3">
              <p>Aguado 25</p>
              <p>General Pacheco, Buenos Aires</p>
              <p class="mt-4">icegralpacheco@gmail.com</p>
              <p>(+54) 4555-1234</p>
            </address>
          </div>
        </div>
        <div
          class="mt-12 pt-8 border-t border-white/10 text-center text-white/70"
        >
          <p>
            © {new Date().getFullYear()} Iglesia Cristiana Evangélica
          </p>
        </div>
      </div>
    </footer>

    <script is:inline src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script is:inline>
      AOS.init({
        duration: 800,
        once: true,
        offset: 100,
      });
      const siteHeader = document.getElementById("site-header");

      window.addEventListener("scroll", () => {
        if (window.scrollY > 50) {
          siteHeader.classList.add(
            "bg-white-light",
            "text-primary",
            "shadow-md"
          );
          siteHeader.classList.remove("text-white");
        } else {
          siteHeader.classList.remove(
            "bg-white-light",
            "text-primary",
            "shadow-md"
          );
          siteHeader.classList.add("text-white");
        }
      });

      const mobileMenuButton = document.getElementById("mobile-menu-button");
      const mobileMenu = document.getElementById("mobile-menu");

      if (mobileMenuButton && mobileMenu) {
        mobileMenuButton.addEventListener("click", () => {
          mobileMenu.classList.toggle("hidden");
        });
      }

      // FAQ accordion functionality
      document.querySelectorAll(".faq-question").forEach((question) => {
        question.addEventListener("click", () => {
          const answer = question.nextElementSibling;
          const icon = question.querySelector("svg");

          answer.classList.toggle("hidden");
          icon.classList.toggle("rotate-180");
        });
      });
      document.addEventListener("DOMContentLoaded", () => {
        const siteHeader = document.getElementById("site-header");
        const logo = siteHeader.querySelector(".font-serif.text-white"); // El logo
        const navLinks = siteHeader.querySelectorAll(
          '.md\\:flex a:not([href="#contacto"])'
        ); // Todos los enlaces de navegación excepto "Contacto"
        const mobileMenuButton = document.getElementById("mobile-menu-button");

        // Clases del header cuando se hace scroll
        const scrolledHeaderClasses = [
          "bg-white/80",
          "backdrop-blur-lg",
          "border-b",
          "border-gray-200/20",
          "shadow-md",
          "text-primary", // Por defecto para todos los elementos hijos
        ];

        // Clases del header cuando está en la parte superior (scroll = 0)
        const initialHeaderClasses = [
          "bg-transparent",
          "text-white", // Por defecto para todos los elementos hijos
          "shadow-none", // Para eliminar la sombra cuando sea transparente
          "border-none", // para eliminar cualquier borde inferior cuando sea transparente
        ];

        function updateHeaderStyle() {
          if (window.scrollY > 50) {
            // Un pequeño umbral para evitar que parpadee
            // Se ha hecho scroll: añadir clases del estado "scrolled"
            siteHeader.classList.remove(...initialHeaderClasses);
            siteHeader.classList.add(...scrolledHeaderClasses);

            // Cambiar color del logo y enlaces
            logo.classList.remove("text-white");
            logo.classList.add("text-primary");

            navLinks.forEach((link) => {
              link.classList.remove("text-white");
              link.classList.add("text-primary");
            });

            mobileMenuButton.classList.remove("text-white");
            mobileMenuButton.classList.add("text-primary");
          } else {
            // No se ha hecho scroll: añadir clases del estado "initial"
            siteHeader.classList.remove(...scrolledHeaderClasses);
            siteHeader.classList.add(...initialHeaderClasses);

            // Cambiar color del logo y enlaces a blanco
            logo.classList.remove("text-primary");
            logo.classList.add("text-white");

            navLinks.forEach((link) => {
              link.classList.remove("text-primary");
              link.classList.add("text-white");
            });

            mobileMenuButton.classList.remove("text-primary");
            mobileMenuButton.classList.add("text-white");
          }
        }

        // Ejecuta la función una vez al cargar la página para establecer el estado inicial correcto
        updateHeaderStyle();

        // Agrega el event listener para el scroll
        window.addEventListener("scroll", updateHeaderStyle);
      });
    </script>
  </body>
</html>